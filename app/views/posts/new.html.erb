<% provide(:title, 'Post') %>
  <div class="form-box">
    <div class="row">
      <div class="col-md-6 col-md-offset-3">
        <div class="gravatar_edit">
          <%= link_to gravatar_for(current_user, size: 50), current_user %>
        </div>
        <section>
          <%= form_with model: @post, local: true do |f| %>
            <%= render 'shared/error_messages', object: f.object %>
            
            <%= f.text_area :caption, class: "form-control", placeholder: "キャプションを書く" %>
            
            <%= f.text_field :hashbody, class: "form-control", placeholder: "ハッシュタグを書く" %>
            
            <%= f.submit "投稿", class: "btn btn-primary" %>
            
            <span class="image">
              <%= f.file_field :image, accept: "image/jpeg,image/jpg,image/png" %>
            </span>
          <% end %>
        </section>
      </div>
    </div>
  </div>
  
  <script type="text/javascript">
  $("#post_image").bind("change", function() {
    var size_in_megabytes = this.files[0].size/1024/1024;
    if (size_in_megabytes > 5) {
      alert("最大ファイルサイズは5MBです。小さいファイルを選択してください。");
      $("#post_image").val("");
    }
  });
</script>